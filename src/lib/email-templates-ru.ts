import { PersonalityType } from './scoring';

type EmailTemplateFn = (firstName: string) => { subject: string; html: string };

function wrapInEmailLayoutRu(content: string): string {
  return `<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.7; color: #1a1a1a; margin: 0; padding: 20px; background-color: #f5f5f5; }
    .container { max-width: 600px; margin: 0 auto; background: #ffffff; padding: 0; }
    .header { background: #000000; padding: 24px 40px; text-align: center; }
    .header h1 { color: #ffffff; margin: 0; font-size: 18px; font-weight: 700; letter-spacing: 0.5px; }
    .body { padding: 40px; }
    .body p { margin: 0 0 20px; color: #1a1a1a; font-size: 16px; }
    .body strong { font-weight: 600; }
    .highlight { background: #49ACF2; color: #ffffff; padding: 2px 6px; font-weight: 500; }
    .body blockquote { border-left: 3px solid #49ACF2; padding-left: 16px; margin: 20px 0; color: #4a4a4a; font-style: italic; }
    .cta { display: inline-block; background: #49ACF2; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 6px; font-weight: 600; margin: 20px 0; }
    .cta:hover { background: #3a9bd9; }
    .footer { padding: 30px 40px; background: #f9f9f9; text-align: center; font-size: 13px; color: #666666; border-top: 1px solid #e5e5e5; }
    .divider { border: none; border-top: 1px solid #e5e5e5; margin: 30px 0; }
    ul { padding-left: 20px; margin: 20px 0; }
    ul li { margin-bottom: 12px; color: #1a1a1a; font-size: 16px; }
    a { color: #49ACF2; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ТЕСТ ЛИЧНОСТИ ТРЕЙДЕРА</h1>
    </div>
    <div class="body">
      ${content}
    </div>
    <div class="footer">
      <p style="margin-bottom:20px"><a href="https://bobe.app" class="cta">Перейти на BoBe.app →</a></p>
      <p>Или откройте напрямую: <a href="https://bobe.app">bobe.app</a></p>
      <hr class="divider">
      <p><strong>${process.env.SENDER_NAME || 'Trading Quiz'}</strong><br>Помогаем трейдерам улучшать результаты</p>
    </div>
  </div>
</body>
</html>`;
}

// ============================================================
// EMOTIONAL TRADER (RU)
// ============================================================

const emotionalTraderEmailsRu: EmailTemplateFn[] = [
  (firstName) => ({
    subject: `Ваш отчёт о типе трейдера готов, ${firstName}!`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Ваш персональный отчёт о типе трейдера готов!</p>
      <p>По результатам теста вы — <strong>ЭМОЦИОНАЛЬНЫЙ ТРЕЙДЕР</strong></p>
      <p>Это значит, что ваш главный враг — не рынок, а эмоции, которые вы приносите на него. FOMO, страх и импульсивные решения мешают стабильной прибыли.</p>
      <p>Но есть хорошая новость: это одна из <strong>самых легко исправимых проблем</strong> при наличии правильной системы.</p>
      <p>Ваш подробный отчёт включает:</p>
      <ul>
        <li>Почему вы относитесь к категории Эмоциональный трейдер</li>
        <li>Ваши 4 главных вызова (и настоящая причина, почему они повторяются)</li>
        <li>Ваши скрытые сильные стороны, которых нет у большинства трейдеров</li>
        <li>5-шаговый план улучшений, который можно начать СЕГОДНЯ</li>
        <li>Как успешные эмоциональные трейдеры трансформируют свои результаты</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_APP_URL}/api/pdf/emotional-trader?name=${encodeURIComponent(firstName)}" class="cta">Скачать отчёт (PDF)</a></p>
      <p>В течение ближайших двух недель я буду присылать вам конкретные стратегии и реальные истории других эмоциональных трейдеров.</p>
      <hr class="divider">
      <p>P.S. — Хотите общаться с другими трейдерами? <a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}">Присоединяйтесь к нашему сообществу</a></p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, вот почему FOMO продолжает уничтожать ваш счёт...`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Быстрый вопрос:</p>
      <p>Помните ту сделку на прошлой неделе (или месяце), когда вы видели как монета растёт в Twitter, все говорили о ней, и вы зашли без плана?</p>
      <p>Вы знали, что не стоило. Нет стоп-лосса. Нет чёткой стратегии. Нет управления риском.</p>
      <p>Но FOMO было непреодолимым. <em>"Все сейчас зарабатывают..."</em></p>
      <p>Итак, вы купили. И если вы как большинство эмоциональных трейдеров — купили на пике.</p>
      <p>Вот что вам нужно понять:</p>
      <blockquote>Это не ваша вина.</blockquote>
      <p>Рынки СОЗДАНЫ для того, чтобы вызывать эти эмоции. Пампы происходят быстро, создавая срочность. Социальные сети усиливают FOMO. Профессиональные трейдеры знают это и зарабатывают на этом.</p>
      <p>Трейдеры, которые стабильно побеждают, не более дисциплинированы чем вы. Они просто <strong>убрали ВОЗМОЖНОСТЬ для эмоций вмешаться</strong> в торговлю.</p>
      <p>Я покажу вам как именно они это делают в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Почему "просто будьте дисциплинированны" не работает для Эмоциональных трейдеров`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Если вы когда-либо читали книгу о трейдинге, вы слышали такой совет: "Просто следуйте своим правилам." "Не позволяйте эмоциям управлять вами." "Будьте дисциплинированны."</p>
      <p>Но это не работает. Вот почему:</p>
      <p>Дисциплина — это <strong>КОНЕЧНЫЙ РЕСУРС</strong>. Она отлично работает когда вы спокойны. Но что происходит когда:</p>
      <ul>
        <li>У вас три убытка подряд и вы отчаянно пытаетесь отыграться?</li>
        <li>Вы видите монету растущую на 40% и все радуются?</li>
        <li>Страх кричит "ЗАКРЫВАЙ ПОЗИЦИЮ СЕЙЧАС"?</li>
      </ul>
      <p>В такие моменты дисциплина испаряется. Потому что вы боретесь с миллионами лет эволюции человека. Страх и жадность <strong>ВШИТЫ</strong> в ваш мозг.</p>
      <p>Трейдеры, которые стабильно побеждают, не полагаются на дисциплину. Они полагаются на <strong>СИСТЕМЫ</strong>, которые делают дисциплину неважной.</p>
      <p>Несколько примеров:</p>
      <ul>
        <li>Используют алерты и лимитные ордера, никогда не "решая" в пылу момента</li>
        <li>Торгуют размером позиции настолько малым, что убытки не вызывают эмоциональных спиралей</li>
        <li>Полностью автоматизируют свою стратегию, убирая человека из цепочки</li>
      </ul>
      <p>Я покажу вам как это сделать в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Как Эмоциональные трейдеры побеждают с помощью автоматизации`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Познакомьтесь с Сарой. Она Эмоциональный трейдер, такой же как вы.</p>
      <p>В прошлом году её торговый счёт рассказывал болезненную историю: -3200$ за 4 месяца. FOMO-входы, мстительная торговля, паническое закрытие прибыльных позиций.</p>
      <p>Она знала что делать — брала курсы, читала книги, имела хорошую стратегию. Её проблема была в исполнении.</p>
      <p>Затем она попробовала кое-что другое. Взяла свою проверенную стратегию и <strong>автоматизировала её</strong>.</p>
      <p>Вот что произошло:</p>
      <ul>
        <li>Месяц 1: +340$</li>
        <li>Месяц 2: +780$</li>
        <li>Месяц 3: +1 120$</li>
        <li>Месяц 4: +840$</li>
      </ul>
      <p>Не каждый месяц был идеальным. Но система следовала правилам <strong>КАЖДЫЙ. РАЗ.</strong></p>
      <p>Никаких FOMO-входов. Никакой мстительной торговли. Никаких панических выходов. Никакого сдвига стоп-лоссов.</p>
      <p>Сара не стала более дисциплинированной. Она <strong>убрала необходимость в дисциплине</strong>.</p>
      <p>В следующем письме я покажу вам точно как это работает и как начать.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `За кулисами: как бот убирает эмоции из торговли`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Вы спрашиваете (или задаётесь вопросом): "Как автоматизированная торговля работает на практике?"</p>
      <p><strong>СТАРЫЙ СПОСОБ (то что вы делаете сейчас):</strong></p>
      <p>Изучение стратегий → Бэктест → Реальная торговля → Эмоции вмешиваются → Нарушение правил → Обвинение стратегии → Начало сначала.</p>
      <p><strong>НОВЫЙ СПОСОБ (автоматизация):</strong></p>
      <ul>
        <li>Проверенная стратегия уже разработана и протестирована профессионалами</li>
        <li>Алгоритм исполняет её 24/7 без каких-либо эмоций</li>
        <li>Вы стейкаете токен чтобы получить доступ</li>
        <li>Вы получаете ежедневные выплаты в USDT автоматически</li>
      </ul>
      <p><strong>Как это решает вашу проблему Эмоционального трейдера:</strong></p>
      <ul>
        <li>FOMO-входы → Бот не испытывает FOMO. Он входит на основе данных.</li>
        <li>Панические выходы → Бот не паникует. Он выходит на заранее определённых уровнях.</li>
        <li>Мстительная торговля → Бот не мстит. Он следует плану.</li>
        <li>Сдвиг стоп-лоссов → Бот никогда не нарушает правила. Никогда.</li>
      </ul>
      <p>Хотите увидеть данные о производительности? Ответьте "ПОКАЖИ МНЕ" и я вышлю детали.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `От Эмоционального трейдера к стабильной прибыли: история Михаила`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Михаил торговал 2 года. Читал все книги, прошёл 3 курса, имел хорошую стратегию. В реальности? -4 500$ в итоге. Его проблема? Эмоциональное исполнение.</p>
      <p>После ещё одного убыточного месяца (-800$) он решил попробовать автоматизацию с небольшой суммой.</p>
      <p><strong>Месяц 1:</strong> +340$ — первый зелёный месяц за 6 месяцев.</p>
      <p><strong>Месяц 2:</strong> +780$</p>
      <p><strong>Месяц 3-4:</strong> +1 120$ и +840$</p>
      <p>Его осознание: <em>"Мои 'торговые инстинкты' были просто эмоциональными реакциями. Бот не умнее меня. Он просто более дисциплинирован."</em></p>
      <p>Теперь 80% его капитала работает автоматически — стабильно, без эмоций, прибыльно. Оставшиеся 20% он торгует вручную для удовольствия.</p>
      <p><strong>Вопрос для вас:</strong> Как долго вы ещё будете бороться со своими эмоциями?</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать как это работает</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Безопасна ли автоматизированная торговля?" Вот честный ответ...`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Давайте честно разберём главные опасения:</p>
      <p><strong>"Я потеряю контроль над деньгами"</strong> — У вас БОЛЬШЕ контроля, не меньше. Вы управляете суммой стейка, можете отменить его в любой момент и получаете ежедневные выплаты.</p>
      <p><strong>"А вдруг бот потеряет деньги?"</strong> — Иногда будет. Это трейдинг. Разница в том, что потери происходят с контролируемым риском, следуя правилам точно, без эмоциональных спиралей.</p>
      <p><strong>"Это звучит слишком хорошо"</strong> — Это не магия. Это просто лучшее исполнение. Ваша стратегия исполняется так как должна — каждый раз.</p>
      <p><strong>"Я не понимаю технологию"</strong> — Вам не нужно. Стейкнуть токен → Получить доступ → Получать ежедневный USDT. Вот и всё.</p>
      <p><strong>Настоящий вопрос не "Идеально ли это?"</strong> — а "Лучше ли это того, что я делаю сейчас?"</p>
      <p>Если вы теряете деньги из-за эмоциональных решений — ответ да.</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать больше</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, давайте решим проблему Эмоциональной торговли`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Мы общаемся уже больше двух недель. Вы узнали почему вы Эмоциональный трейдер, почему дисциплина не работает, и как автоматизация убирает эмоции из уравнения.</p>
      <p>Теперь время для решения.</p>
      <p><strong>Вариант A:</strong> Продолжать делать то же самое — ручная торговля с теми же эмоциональными проблемами. Через 6 месяцев вы, скорее всего, будете в том же месте.</p>
      <p><strong>Вариант B:</strong> Попробовать что-то другое — убрать эмоциональные решения, позволить проверенным стратегиям исполняться стабильно. Через 6 месяцев у вас может быть реальная прибыль.</p>
      <p><strong>Специально для участников теста:</strong></p>
      <ul>
        <li>Приоритетный онбординг (без ожидания в очереди)</li>
        <li>Персональная помощь в настройке</li>
        <li>Доступ в нашу группу поддержки Эмоциональных трейдеров</li>
        <li>Отслеживание и оптимизация результатов в первый месяц</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Записаться на онбординг</a></p>
      <p>Если вы ещё не готовы — всё хорошо. Оставайтесь в списке, мы продолжим присылать полезный контент.</p>
      <p>До скорого</p>
      <hr class="divider">
      <p><em>P.S. — Самый большой риск — не попробовать автоматизацию. Самый большой риск — делать то же самое ещё 6 месяцев и получать те же результаты.</em></p>
    `),
  }),
];

// ============================================================
// TIME-STARVED TRADER (RU)
// ============================================================

const timeStarvedTraderEmailsRu: EmailTemplateFn[] = [
  (firstName) => ({
    subject: `Ваш отчёт о типе трейдера готов, ${firstName}!`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Ваш персональный отчёт о типе трейдера готов!</p>
      <p>По результатам теста вы — <strong>ТРЕЙДЕР БЕЗ ВРЕМЕНИ</strong></p>
      <p>Это значит, что ваш главный барьер — не недостаток знаний, а недостаток времени. Рынки не учитывают ваш график, а лучшие движения часто происходят пока вы спите.</p>
      <p>Но есть хорошая новость: это <strong>решаемая проблема</strong>.</p>
      <p>Ваш подробный отчёт включает:</p>
      <ul>
        <li>Почему вы относитесь к категории Трейдер без времени</li>
        <li>Ваши 4 главных вызова связанных со временем</li>
        <li>Ваши скрытые сильные стороны (да, занятость имеет преимущества)</li>
        <li>5-шаговый план для эффективной торговли при ограниченном времени</li>
        <li>Как успешные занятые трейдеры побеждают</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_APP_URL}/api/pdf/time-starved-trader?name=${encodeURIComponent(firstName)}" class="cta">Скачать отчёт (PDF)</a></p>
      <p>В течение ближайших двух недель я буду присылать стратегии специально для занятых трейдеров.</p>
      <hr class="divider">
      <p>P.S. — Хотите общаться с другими занятыми трейдерами? <a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}">Присоединяйтесь к нашему сообществу</a></p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, сколько движений вы пропустили на этой неделе пока работали?`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Быстрый вопрос: сколько раз в этом месяце вы просыпались, проверяли телефон и видели, что идеальный сетап который вы нашли... сработал пока вы спали?</p>
      <p>Если вы как большинство Трейдеров без времени — это происходит несколько раз в неделю.</p>
      <p>Это обидно, потому что вы ЗНАЛИ об этой возможности. Просто не могли её исполнить.</p>
      <p>Вот правда, которую большинство не скажут вам:</p>
      <blockquote>Вы не можете конкурировать с профессиональными трейдерами по доступности. И не должны пытаться.</blockquote>
      <p>Попытка дейтрейдить с полной занятостью — это как бег на марафон с рюкзаком полным камней. Можно, но с огромным невыгодным положением.</p>
      <p>Трейдеры, которые побеждают при ограниченном времени, стараются не больше — они <strong>торгуют умнее</strong>.</p>
      <p>Я расскажу что это значит в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Почему "ставить алерты" недостаточно для Трейдеров без времени`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Обычный совет для занятых трейдеров: "Просто ставьте алерты и проверяйте в перерывах."</p>
      <p>Проблема? Даже с алертами:</p>
      <ul>
        <li>Вы на совещании когда алерт срабатывает</li>
        <li>К тому времени как вы проверяете — движение уже произошло</li>
        <li>Ваша "быстрая сделка" в обед превращается в отвлечённый беспорядок</li>
        <li>Вы выставляете лимитные ордера, но не можете скорректировать когда условия меняются</li>
      </ul>
      <p>Алерты помогают, но не решают фундаментальную проблему: <strong>крипторынки работают 24/7, а вы не можете быть доступны 24/7.</strong></p>
      <p>Трейдеры, которые решают это, не пытаются быть более доступными. Они строят системы, которые <strong>вообще не требуют их присутствия</strong>.</p>
      <p>Некоторые используют свинг-трейдинг на старших таймфреймах. Некоторые — продвинутые лимитные ордера. А самые успешные? Полностью автоматизируют.</p>
      <p>Подробнее в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Как Трейдеры без времени наконец перестали упускать движения`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Познакомьтесь с Иваном. Медбрат с 12-часовыми сменами. Он пропускал 90% крипто-движений, потому что буквально не мог смотреть на графики во время работы.</p>
      <p>Он пробовал всё: алерты, лимитные ордера, торговлю только в выходные. Ничего не работало стабильно.</p>
      <p>Затем он открыл для себя автоматизированную торговлю. Его бот теперь:</p>
      <ul>
        <li>Следит за рынками пока он на смене</li>
        <li>Исполняет стратегии во время азиатской сессии пока он спит</li>
        <li>Ловит возможности, которые он пропустил бы в 100% случаев</li>
        <li>Управляет риском без его участия</li>
      </ul>
      <p>Результат? Стабильная доходность при работе на постоянной работе. Ноль упущенных возможностей из-за "плохого тайминга".</p>
      <p>Это не лень. Это умный подход. Зачем конкурировать там где вы в невыгодном положении (время), когда можно использовать системы делающие время неважным?</p>
      <p>В следующем письме я покажу как именно это работает.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Вот как наш бот торгует пока вы спите, работаете и живёте`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p><strong>Как это работает:</strong></p>
      <ul>
        <li>Вы стейкаете наш токен (это даёт доступ к боту)</li>
        <li>Бот торгует 24/7 на нескольких рынках используя проверенные алгоритмы</li>
        <li>Вы получаете ежедневный USDT напрямую на ваш кошелёк</li>
        <li>Никаких торговых решений от вас не требуется</li>
      </ul>
      <p><strong>Что это значит для вашей проблемы со временем:</strong></p>
      <ul>
        <li>Азиатская сессия в 3 ночи? Бот торгует.</li>
        <li>Открытие Европы пока вы едете на работу? Бот торгует.</li>
        <li>Волатильность в выходные пока вы с семьёй? Бот торгует.</li>
        <li>Загруженный рабочий день без времени на графики? Бот торгует.</li>
      </ul>
      <p>Вы переходите от ловли 10-20% возможностей (тех что происходят в ваше свободное время) к захвату возможностей <strong>в каждой сессии, каждый день</strong>.</p>
      <p>Хотите увидеть данные о производительности? Ответьте "ПОКАЖИ МНЕ" и я вышлю детали.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Я наконец перестал пропускать движения" — история Трейдера без времени`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Анна — разработчик программного обеспечения. 50-часовые рабочие недели. К тому времени как она проверяла графики после работы — движения были уже позади.</p>
      <p>Знакомо?</p>
      <p>После перехода на автоматизированную торговлю:</p>
      <ul>
        <li>Она больше не проверяет графики на работе</li>
        <li>Её портфель работает 24/7 без вмешательства</li>
        <li>Она просматривает результаты раз в неделю (занимает 5 минут)</li>
        <li>Вечера она проводит с семьёй, а не глядя в графики</li>
      </ul>
      <p><em>"Лучшее — не доходность, а возвращённое время. Я тратила 2-3 часа в день на торговлю и всё равно упускала большинство возможностей. Теперь бот занимается этим, а у меня есть своя жизнь."</em></p>
      <p>Хотите тоже вернуть своё время?</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать как это работает</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Но я хочу стать настоящим трейдером..." Вот правда`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Разберём самые распространённые опасения Трейдеров без времени:</p>
      <p><strong>"Я хочу научиться торговать сам"</strong> — Отлично! Продолжайте учиться. Но пока учитесь, почему бы не иметь систему генерирующую доходность? Вы всегда можете торговать вручную когда будете готовы.</p>
      <p><strong>"А вдруг потом будет больше свободного времени?"</strong> — Даже профессиональные трейдеры используют автоматизацию. Больше времени не значит что ручная торговля лучше — просто есть время управлять автоматизированными системами.</p>
      <p><strong>"Как я узнаю что это работает если не слежу?"</strong> — Ежедневные USDT на ваш кошелёк. Еженедельные отчёты о производительности. Вы проверяете результаты без мониторинга каждой сделки.</p>
      <p><strong>"Что насчёт риска?"</strong> — Вы управляете размером стейка. Начните с малого. Смотрите на результаты. Увеличивайте когда удобно.</p>
      <p>Вопрос не в том может ли автоматизация вам помочь. Вопрос в том как долго вы ещё будете упускать возможности пока заняты жизнью.</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать больше</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, хватит упускать движения. Вот ваш следующий шаг.`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>За последние две недели вы узнали почему нехватка времени — ваш главный торговый барьер и как автоматизация полностью решает это.</p>
      <p>Каждый день ожидания — ещё один день упущенных возможностей. Рынки движутся прямо сейчас — пока вы читаете это письмо. Вы улавливаете эти движения?</p>
      <p><strong>Специально для участников теста:</strong></p>
      <ul>
        <li>Приоритетный онбординг</li>
        <li>Персональная помощь в настройке</li>
        <li>Доступ в нашу группу поддержки Трейдеров без времени</li>
        <li>Отслеживание результатов в первый месяц</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Записаться на онбординг</a></p>
      <p>Ещё не готовы? Всё хорошо. Но помните: рынок не ждёт пока вы освободитесь.</p>
      <p>До скорого</p>
    `),
  }),
];

// ============================================================
// INCONSISTENT EXECUTOR (RU)
// ============================================================

const inconsistentExecutorEmailsRu: EmailTemplateFn[] = [
  (firstName) => ({
    subject: `Ваш отчёт о типе трейдера готов, ${firstName}!`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Ваш персональный отчёт о типе трейдера готов!</p>
      <p>По результатам теста вы — <strong>НЕПОСЛЕДОВАТЕЛЬНЫЙ ИСПОЛНИТЕЛЬ</strong></p>
      <p>Это значит, что у вас есть знания и стратегия, но исполнение — ваша ахиллесова пята. Вы знаете что делать — разрыв в стабильном выполнении.</p>
      <p>Хорошая новость? <strong>Дисциплина — это проблема системы, а не силы воли.</strong></p>
      <p>Ваш отчёт включает:</p>
      <ul>
        <li>Почему вы относитесь к категории Непоследовательный исполнитель</li>
        <li>Ваши 4 главных вызова в исполнении</li>
        <li>Ваши скрытые сильные стороны (вы способнее чем думаете)</li>
        <li>5-шаговый план для закрытия разрыва в исполнении</li>
        <li>Как успешные исполнители трансформируют свою последовательность</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_APP_URL}/api/pdf/inconsistent-executor?name=${encodeURIComponent(firstName)}" class="cta">Скачать отчёт (PDF)</a></p>
      <p>В течение ближайших двух недель я поделюсь стратегиями специально для трейдеров, которые знают что делать, но не могут делать это стабильно.</p>
      <hr class="divider">
      <p>P.S. — Общайтесь с другими решающими ту же проблему: <a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}">Присоединяйтесь к нашему сообществу</a></p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, разрыв между тем что вы знаете и тем что делаете стоит вам денег...`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Вы знаете это чувство. Вы протестировали стратегию. Она работает. Вы написали правила. Они чёткие.</p>
      <p>Затем открывается рынок и всё разваливается.</p>
      <p>Вы ставите стоп-лосс на -3%... но когда цена приближается — вы его двигаете. <em>"Чуть больше места."</em></p>
      <p>Вы видите идеальный сетап класса A... но колеблетесь. <em>"А вдруг на этот раз будет иначе?"</em> К тому времени как вы решились — момент упущен.</p>
      <p>Вот болезненная правда: <strong>Ваша стратегия не проблема. Вы — проблема.</strong></p>
      <p>Но не в том смысле что вы думаете. Не потому что вы слабы или недисциплинированны. А потому что вы пытаетесь использовать силу воли там, где нужны системы.</p>
      <p>Вы доверили бы себе расчёт налогов вручную каждый месяц без программы? Нет — вы бы использовали систему. Трейдинг должен быть таким же.</p>
      <p>Подробнее в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Почему сила воли всегда подводит Непоследовательных исполнителей`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Каждый раз когда вы обещаете "на этот раз я буду следовать правилам" — вы делаете одну и ту же ошибку: полагаетесь на силу воли.</p>
      <p>Исследования показывают: сила воли как батарейка — она истощается от использования. После нескольких убытков, долгого рабочего дня или выигрышной серии делающей вас самоуверенным — ваша сила воли на нуле.</p>
      <p>Именно тогда вам больше всего нужна дисциплина. И именно тогда её нет.</p>
      <p>Решение — не больше силы воли. Это <strong>полное устранение необходимости в ней</strong>.</p>
      <ul>
        <li>Не "решайте" ставить стоп-лосс → Сделайте это автоматическим</li>
        <li>Не "старайтесь" следовать правилам входа → Уберите субъективность из входов</li>
        <li>Не "обещайте" вести журнал → Создайте системы обеспечивающие подотчётность</li>
      </ul>
      <p>У лучших исполнителей не больше дисциплины. У них лучше системы.</p>
      <p>Я покажу вам главную систему в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Тайное оружие Непоследовательного исполнителя: убрать себя из уравнения`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Вот неудобная правда: <strong>Вы — самое слабое звено в вашей торговой системе.</strong></p>
      <p>Ваша стратегия работает. Ваши правила разумны. Единственное что подводит — это ваше исполнение. Что если бы вы могли сохранить стратегию, но убрать человеческий фактор?</p>
      <p>Именно это делает автоматизация.</p>
      <p>Познакомьтесь с Дмитрием. Та же проблема что у вас — отличная стратегия, ужасное исполнение. После 18 месяцев непоследовательности он автоматизировал свои правила.</p>
      <p>Результат? Его автоматизированная система следовала правилам со 100% последовательностью. Никаких колебаний. Никаких нарушений правил. Никаких "только на этот раз".</p>
      <p>Его стратегия наконец получила возможность показать на что она способна при правильном исполнении. И она сработала.</p>
      <p>Дмитрий не стал более дисциплинированным. Он стал умнее в вопросах исполнения.</p>
      <p>В следующем письме я покажу как именно это работает.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Как наш бот исполняет вашу стратегию со 100% последовательностью`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p><strong>Вот как это работает:</strong></p>
      <ul>
        <li>Вы стейкаете наш токен (это даёт доступ)</li>
        <li>Проверенные стратегии исполняются 24/7 с идеальной последовательностью</li>
        <li>Вы получаете ежедневный USDT</li>
        <li>Никаких решений по исполнению от вас не требуется</li>
      </ul>
      <p><strong>Что это значит для вашей проблемы с исполнением:</strong></p>
      <ul>
        <li>Идеальный сетап класса A? Бот входит. Без колебаний.</li>
        <li>Стоп-лосс сработал? Бот выходит. Без сдвига.</li>
        <li>Три убытка подряд? Бот всё равно следует правилам. Без тильта.</li>
        <li>Цель достигнута? Бот берёт прибыль. Без "пусть бежит" авантюр.</li>
      </ul>
      <p>Ваш тип БОЛЬШЕ всего выигрывает от автоматизации, потому что у вас уже есть знания. Вам нужно только последовательное исполнение — и именно это обеспечивает система.</p>
      <p>Ответьте "ПОКАЖИ МНЕ" для данных о производительности.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Я перестал бороться с собой и начал побеждать" — история Исполнителя`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>У Дмитрия было 67% выигрышных сделок в бэктесте. В реальной торговле? 41%. Та же стратегия, разные результаты. Разрыв? Исполнение.</p>
      <p>Он пропускал хорошие сетапы из-за нерешительности. Двигал стоп-лоссы. Выходил из прибыльных позиций раньше времени. Нарушал собственные правила "только на этот раз".</p>
      <p>После автоматизации:</p>
      <ul>
        <li>Его стратегия наконец работала как запланировано</li>
        <li>Процент выигрышей сравнялся с бэктестом в течение недель</li>
        <li>Больше никакого "я знал что нужно взять ту сделку"</li>
        <li>Стресс резко снизился</li>
      </ul>
      <p><em>"Самое сложное — признать что проблема во мне. Как только я принял это и позволил системе исполнять — всё изменилось."</em></p>
      <p>Готовы закрыть свой разрыв в исполнении?</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать как это работает</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Сдаюсь ли я на пути к тому чтобы стать лучше?" Нет. Вот почему.`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Распространённое опасение Непоследовательных исполнителей: "Если я автоматизирую — признаю ли я поражение?"</p>
      <p><strong>Нет. Вы признаёте реальность.</strong></p>
      <p>Реальность такова: человеческое исполнение несовершенно. Даже лучшие трейдеры мира используют системы и автоматизацию.</p>
      <p>Автоматизация не означает, что вы прекращаете учиться или быть трейдером. Это означает что вы используете свои сильные стороны (стратегия, анализ) и устраняете слабость (непоследовательное исполнение).</p>
      <p><strong>Другие опасения:</strong></p>
      <p><strong>"А вдруг бот делает ошибки?"</strong> — Боты не делают ошибок исполнения. Они могут столкнуться с неблагоприятным рынком, но никогда не нарушают свои правила.</p>
      <p><strong>"Можно начать с малого?"</strong> — Конечно. Большинство начинают с небольшого стейка, проверяют результаты, потом увеличивают.</p>
      <p><strong>"Что если захочу остановиться?"</strong> — Отмените стейк в любой момент. Никакой привязки.</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать больше</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, идеальное исполнение на расстоянии одного шага`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>У вас есть знания. У вас есть стратегия. Единственный недостающий элемент — последовательное исполнение.</p>
      <p>Сколько ещё месяцев непоследовательности прежде чем вы попробуете другой подход?</p>
      <p><strong>Специально для участников теста:</strong></p>
      <ul>
        <li>Приоритетный онбординг</li>
        <li>Персональная помощь в настройке</li>
        <li>Доступ в нашу группу поддержки Непоследовательных исполнителей</li>
        <li>Отслеживание результатов в первый месяц</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Записаться на онбординг</a></p>
      <p>Ваша стратегия заслуживает идеального исполнения. Давайте это реализуем.</p>
      <p>До скорого</p>
    `),
  }),
];

// ============================================================
// OVERWHELMED ANALYST (RU)
// ============================================================

const overwhelmedAnalystEmailsRu: EmailTemplateFn[] = [
  (firstName) => ({
    subject: `Ваш отчёт о типе трейдера готов, ${firstName}!`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Ваш персональный отчёт о типе трейдера готов!</p>
      <p>По результатам теста вы — <strong>ПЕРЕГРУЖЕННЫЙ АНАЛИТИК</strong></p>
      <p>Это значит, что вы тонете в информации, индикаторах и противоречивых советах. К тому времени как вы всё проанализируете — возможность упущена.</p>
      <p>Хорошая новость? Вам нужно не больше информации — вам нужна <strong>ясность и упрощение</strong>.</p>
      <p>Ваш отчёт включает:</p>
      <ul>
        <li>Почему вы относитесь к категории Перегруженный аналитик</li>
        <li>Ваши 4 главных вызова в анализе</li>
        <li>Ваши скрытые сильные стороны (ваш аналитический склад ума — актив)</li>
        <li>5-шаговый план упрощения</li>
        <li>Как успешные аналитики отсеивают шум</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_APP_URL}/api/pdf/overwhelmed-analyst?name=${encodeURIComponent(firstName)}" class="cta">Скачать отчёт (PDF)</a></p>
      <p>В течение ближайших двух недель я помогу вам упростить подход и обрести ясность.</p>
      <hr class="divider">
      <p>P.S. — Присоединяйтесь к тем, кто нашёл ясность: <a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}">Наше сообщество</a></p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, ваши 20 индикаторов делают вас ХУЖЕ в трейдинге...`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Сколько индикаторов сейчас на ваших графиках? Честно.</p>
      <p>RSI? MACD? Полосы Боллинджера? Скользящие средние? Профиль объёма? Уровни Фибоначчи? Облако Ишимоку?</p>
      <p>Если вы как большинство Перегруженных аналитиков — минимум 5-10. Может больше.</p>
      <p>Вот что никто вам не скажет: <strong>Больше индикаторов = хуже решения.</strong></p>
      <p>Почему? Потому что индикаторы часто противоречат друг другу. RSI говорит перепродан (покупай!). MACD говорит медвежье пересечение (продавай!). Скользящая средняя говорит тренд вверх. Полосы Боллинджера говорят перекуплен.</p>
      <p>Значит, вы замираете. Анализируете ещё. Ищете подтверждение. К тому времени как все индикаторы согласны... движение закончилось.</p>
      <p>Лучшие трейдеры используют максимум 2-3 инструмента. Ясность побеждает сложность. Всегда.</p>
      <p>Я покажу вам путь к упрощению в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Почему потребление большего количества торгового контента делает вас беднее`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Сколько торговых аналитиков вы читаете? YouTube-каналов? Twitter-аккаунтов? Discord-серверов?</p>
      <p>Проблема с бесконечным потреблением торгового контента:</p>
      <ul>
        <li>Аналитик A говорит что лучше всего следовать тренду</li>
        <li>Аналитик B клянётся возвратом к среднему</li>
        <li>Аналитик C использует чистое ценовое действие</li>
        <li>Аналитик D говорит что индикаторы обязательны</li>
      </ul>
      <p>Все они показывают выигрышные сделки. Все звучат убедительно. А вы застряли посередине, пытаясь объединить все их советы в один подход.</p>
      <p>Результат? Стратегия Франкенштейна, которая не работает, потому что строится на противоречивых философиях.</p>
      <p><strong>Решение — радикальное упрощение:</strong></p>
      <ul>
        <li>Выберите ОДИН подход</li>
        <li>Следуйте ОДНОМУ аналитику (максимум 2-3)</li>
        <li>Используйте ОДНУ стратегию минимум 3 месяца</li>
        <li>Отпишитесь от всех остальных</li>
      </ul>
      <p>Или ещё лучше: позвольте проверенной, протестированной системе принимать объективные решения за вас. Никаких противоречивых мнений. Никакого паралича анализа.</p>
      <p>Подробнее в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Как Перегруженные аналитики нашли ясность через автоматизацию`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Познакомьтесь с Алексом. Бывший Перегруженный аналитик. 15 индикаторов на графиках. Следил за 40+ торговыми аккаунтами. Анализировал часами перед каждой сделкой.</p>
      <p>Результат? Упускал большинство движений потому что всё ещё анализировал когда они происходили.</p>
      <p>Его поворотный момент: <em>"Я понял, что использовал анализ как инструмент прокрастинации. Я не торговал — я бесконечно готовился к торговле."</em></p>
      <p>Он попробовал упрощение. Меньше индикаторов, меньше источников. Но аналитический склад ума постоянно тянул его назад к "ещё одному подтверждению".</p>
      <p>Затем он открыл для себя автоматизированную торговлю. И всё изменилось.</p>
      <p>Почему? Потому что боту не нужно 15 индикаторов. Он использует проверенный, протестированный алгоритм с чёткими, объективными правилами. Никаких противоречивых сигналов. Никаких "ещё одной проверки". Просто исполнение.</p>
      <p>Впервые портфель Алекса зарабатывал деньги вместо того чтобы быть проанализированным до смерти.</p>
      <p>Я покажу как это работает в следующем письме.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `Ноль индикаторов: как наш бот торгует с чистой объективностью`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p><strong>Вот как это работает:</strong></p>
      <ul>
        <li>Вы стейкаете наш токен (это даёт доступ)</li>
        <li>Проверенный алгоритм торгует 24/7 используя объективные, протестированные критерии</li>
        <li>Вы получаете ежедневный USDT</li>
        <li>Никакого субъективного анализа от вас не требуется</li>
      </ul>
      <p><strong>Что это значит для вашего паралича анализа:</strong></p>
      <ul>
        <li>Никаких противоречивых индикаторов → Один проверенный алгоритм</li>
        <li>Никакого "ещё одного подтверждения" → Объективные критерии входа</li>
        <li>Никаких раздумий о выходе → Заранее определённые уровни</li>
        <li>Никакой информационной перегрузки → Чёткие решения на основе данных</li>
      </ul>
      <p>Вы переходите от часов анализа и упущенных движений к системе принимающей объективные решения за миллисекунды.</p>
      <p>Ирония? Меньше анализа — лучше результаты.</p>
      <p>Ответьте "ПОКАЖИ МНЕ" для данных о производительности.</p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Я удалил все индикаторы и утроил доходность" — история Алекса`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Помните Алекса из прошлых писем? Вот что произошло после перехода на автоматизацию:</p>
      <p><strong>До автоматизации:</strong></p>
      <ul>
        <li>3-4 часа ежедневно на анализ графиков</li>
        <li>Упускал 70% возможностей из-за паралича анализа</li>
        <li>Постоянные сомнения в каждом решении</li>
        <li>Усталость и стресс</li>
      </ul>
      <p><strong>После автоматизации:</strong></p>
      <ul>
        <li>5 минут в день на просмотр результатов</li>
        <li>Бот ловит возможности во всех сессиях</li>
        <li>Ноль субъективных решений для сомнений</li>
        <li>Расслаблен и сфокусирован на других вещах</li>
      </ul>
      <p><em>"Главным изменением была ясность ума. Я не понимал сколько энергии трачу на анализ пока не остановился. Теперь эту энергию я трачу на настоящую жизнь."</em></p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать как это работает</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `"Но мне НРАВИТСЯ анализировать..." Вот почему это вас сдерживает`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Я понимаю. Вам нравится анализ. Исследования. Глубокое погружение. Это кажется продуктивным.</p>
      <p>Но вот жёсткая правда: <strong>анализ, не ведущий к действию, — это развлечение, а не трейдинг.</strong></p>
      <p>Если ваш анализ регулярно приводит к сделкам, следующим вашим правилам — отлично, продолжайте анализировать. Но если вы тратите часы на анализ и потом либо не торгуете, либо торгуете плохо... этот анализ — зона комфорта, а не преимущество.</p>
      <p><strong>Другие опасения:</strong></p>
      <p><strong>"Я хочу понимать каждую сделку"</strong> — Вы всё равно можете изучать сделки бота. Просто не нужно принимать решения в реальном времени.</p>
      <p><strong>"А вдруг алгоритм ошибётся?"</strong> — Иногда будет. Но он ошибается объективно, с контролируемым риском. Вы ошибаетесь субъективно, с эмоциональным риском сверху.</p>
      <p><strong>"Можно продолжать анализировать для удовольствия?"</strong> — Конечно. Но разделяйте анализ для удовольствия и анализ для прибыли. Пусть бот занимается прибылью.</p>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Узнать больше</a></p>
      <p>До скорого</p>
    `),
  }),
  (firstName) => ({
    subject: `${firstName}, ясность на расстоянии одного решения`,
    html: wrapInEmailLayoutRu(`
      <p>Привет, ${firstName},</p>
      <p>Две недели вы изучали свои склонности Перегруженного аналитика и понимали что упрощение — а не больше анализа — это путь вперёд.</p>
      <p>Вот ирония: прямо сейчас вы, возможно, слишком долго думаете о том попробовать ли автоматизацию. Анализируете плюсы и минусы. Ищете ещё одну деталь.</p>
      <p>Это ваш паттерн. Узнайте его.</p>
      <p>Иногда лучший анализ — знать когда прекратить анализировать и начать действовать.</p>
      <p><strong>Специально для участников теста:</strong></p>
      <ul>
        <li>Приоритетный онбординг</li>
        <li>Персональная помощь в настройке</li>
        <li>Доступ в нашу группу поддержки Перегруженных аналитиков</li>
        <li>Отслеживание результатов в первый месяц</li>
      </ul>
      <p><a href="${process.env.NEXT_PUBLIC_COMMUNITY_LINK || '#'}" class="cta">Записаться на онбординг</a></p>
      <p>Прекратите анализировать. Начните действовать.</p>
      <p>До скорого</p>
    `),
  }),
];

// ============================================================
// EMAIL TEMPLATE REGISTRY (RU)
// ============================================================

const EMAIL_TEMPLATES_RU: Record<PersonalityType, EmailTemplateFn[]> = {
  emotional_trader: emotionalTraderEmailsRu,
  time_starved_trader: timeStarvedTraderEmailsRu,
  inconsistent_executor: inconsistentExecutorEmailsRu,
  overwhelmed_analyst: overwhelmedAnalystEmailsRu,
};

export function getEmailTemplateRu(
  type: PersonalityType,
  emailNumber: number
): EmailTemplateFn | null {
  const templates = EMAIL_TEMPLATES_RU[type];
  if (!templates || emailNumber < 1 || emailNumber > templates.length) return null;
  return templates[emailNumber - 1];
}
